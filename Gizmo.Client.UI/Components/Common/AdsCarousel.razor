@namespace Gizmo.Client.UI.Components
@inherits CustomDOMComponentBase

<div class="giz-ads-carousel">
    <CascadingValue Value="@this" IsFixed="true">
        <div class="giz-ads-carousel__body">

            @foreach (var item in AdvertisementsService.ViewState.Advertisements)
            {
                <AdsCarouselItem AdvertisementId="@item.Id" @key="item.Id" />
            }

            @if (AdvertisementsService.ViewState.Advertisements.Count() > 2)
            {
                @foreach (var item in AdvertisementsService.ViewState.Advertisements)
                {
                    <AdsCarouselItem AdvertisementId="@item.Id" Duplicate="true" @key="item.Id" />
                }
            }

        </div>
        <div class="giz-ads-carousel__navigation">
            <div class="giz-ads-carousel__navigation__indicators">
                <AdsCarouselIndicator Maximum="5" Size="@(AdvertisementsService.ViewState.Advertisements?.Count() ?? 0)" SelectedIndex="@SelectedIndex" SelectedIndexChanged="SelectedIndexChangedHandler" />
            </div>
        </div>
    </CascadingValue>
</div>