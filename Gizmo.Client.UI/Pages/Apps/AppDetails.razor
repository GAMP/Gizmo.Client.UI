@namespace Gizmo.Client.UI.Pages
@inherits CustomDOMComponentBase

<div class="giz-app-details">
    <div class="giz-app-details__app">
        <NavLink href="@ClientRoutes.ApplicationsRoute" class="giz-app-details__app__navigation">
            <div class="giz-app-details__app__navigation__icon">
                <Icon SVGIcon="Icons.ArrowLeftLong_Client" />
            </div>
            <div class="giz-app-details__app__navigation__label">
                @LocalizationService.GetString("GIZ_GEN_BACK_TO", LocalizationService.GetString("MODULE_PAGE_APPS_TITLE"))
            </div>
        </NavLink>
        <div class="giz-app-details__app__info">
            <div class="giz-app-details__app__info__image">
                @if (ApplicationDetailsPageService.ViewState.Application?.ImageId.HasValue == true)
                {
                    <GizImage ImageType="Gizmo.UI.ImageType.Application" ImageId="@ApplicationDetailsPageService.ViewState.Application.ImageId.Value" />
                }
                else
                {
                    <img src="_content/Gizmo.Client.UI/img/no-app-image.png" alt="loading" />
                }
            </div>

            <div class="giz-app-details__app__info__details">
                
                <div class="giz-app-details__app__info__details__category">
                    @if (ApplicationDetailsPageService.ViewState.Application != null)
                    {
                        @(AppCategoryViewStateLookupService.GetStateAsync(ApplicationDetailsPageService.ViewState.Application.ApplicationCategoryId).GetAwaiter().GetResult().Name)
                    }
                </div>
                <div class="giz-app-details__app__info__details__title">
                    @ApplicationDetailsPageService.ViewState.Application?.Title
                </div>
                <div class="giz-app-details__app__info__details__description">
                    @ApplicationDetailsPageService.ViewState.Application?.Description
                </div>
                <div class="giz-app-details__app__info__details__executables">
                    @if (ApplicationDetailsPageService.ViewState.Executables.Count() == 1)
                    {
                        <ExecutableLaunchButton @key="ApplicationDetailsPageService.ViewState.Executables.Select(a => a.ExecutableId).First()" ExecutableId="@ApplicationDetailsPageService.ViewState.Executables.Select(a => a.ExecutableId).First()" Size="ButtonSizes.ExtraLarge" IsFullWidth="true" />
                    }
                    else if (ApplicationDetailsPageService.ViewState.Executables.Count() > 1)
                    {
                        <Button Color="ButtonColors.Accent" Size="ButtonSizes.ExtraLarge" IsFullWidth="true" @onclick="@(() => OnClickMainButtonHandler())">@LocalizationService.GetString("GIZ_APPS_LAUNCH")</Button>
                    }
                </div>

            </div>

            <div class="giz-app-details-card-brand-info">
                <div class="giz-app-details-card-brand-title">
                    @LocalizationService.GetString("GIZ_APPS_PUBLISHER")
                </div>
                <div class="giz-app-details-card-brand-text">
                    @if (ApplicationDetailsPageService.ViewState.Application?.PublisherId != null)
                    {
                        @(AppEnterpriseViewStateLookupService.GetStateAsync(ApplicationDetailsPageService.ViewState.Application.PublisherId.Value).GetAwaiter().GetResult().Name)
                    }
                </div>
                <div class="giz-app-details-card-brand-title">
                    @LocalizationService.GetString("GIZ_APPS_RELEASE_DATE")
                </div>
                <div class="giz-app-details-card-brand-text">
                    @ApplicationDetailsPageService.ViewState.Application?.ReleaseDate?.ToShortDateString()
                </div>
                <div class="giz-app-details-card-brand-title">
                    @LocalizationService.GetString("GIZ_APPS_DATE_ADDED")
                </div>
                <div class="giz-app-details-card-brand-text">
                    @ApplicationDetailsPageService.ViewState.Application?.AddDate.ToShortDateString()
                </div>
                @*<div class="giz-app-details-card-brand-title">
                    @LocalizationService.GetString("GIZ_APPS_PLAYER_MODE")
                </div>
                <div class="giz-app-details-card-brand-text">
                    <div class="d-flex align-center" style="justify-content: flex-end;">
                        Single Player
                    </div>
                </div>*@
            </div>

            <div class="giz-app-details__app__info__additional-content">
                <div class="giz-app-details__app__info__additional-content__tags">
                    <div class="giz-app-tag">Tags</div>
                </div>
                <div class="giz-app-details__app__info__additional-content__tab">
                    <ClientTab>
                        <ClientTabItem Class="@(_selectedTabIndex == 0 ? "active" : "")">
                            <div @onclick=@(() => SelectTab(0))>
                                @LocalizationService.GetString("GIZ_APPS_MEDIA")
                            </div>
                        </ClientTabItem>
                        <ClientTabItem Class="@(_selectedTabIndex == 1 ? "active" : "")">
                            <div @onclick=@(() => SelectTab(1))>
                                @LocalizationService.GetString("GIZ_APPS_LINKS")
                            </div>
                        </ClientTabItem>
                    </ClientTab>
                </div>
                <div class="giz-app-details__app__info__additional-content__media">
                    <AppDetailsLinks ApplicationId="@ApplicationId" @key="ApplicationId" />
                </div>
            </div>

        </div>
    </div>
    <div class="giz-app-details__leaderboard">
        @*<Leaderboard />*@
    </div>
</div>
