@inherits ComponentBase
@using Gizmo.Web.Components
@using Gizmo.Client.UI.Components
@using Gizmo.Client.UI.ViewModels

<!--wrapper 1-->
<div class="wrapper_1">
    <section id="giz-shop-sidebar" class="giz-shop-categories pa-6">
        <div class="giz-header-title">Categories</div>

        <List CanClick="true" CanSelect="true" Class="giz-menu-list giz-shop-products-menu-list" BodyClass="giz-scrollbar-v">
            @foreach (var productGroup in ProductGroups)
            {
                <ListItem Command="@SelectProductGroupCommand" CommandParameter="@productGroup.Id">
                    <div class="d-flex">
                        <div class="mr-auto">
                            @productGroup.Name
                        </div>
                        @if (Products != null)
                        {
                            <div class="giz-search-number">
                                @Products.Where(a => a.ProductGroupId == productGroup.Id).Count()
                            </div>
                        }
                    </div>
                </ListItem>
            }
        </List>

    </section>
</div>
<!--/wrapper 1-->
<!--wrapper 2-->
<div class="wrapper_2 border-start">
    <!--giz main-->
    <div class="giz-main">
        <!--wrapper 3-->
        <div class="wrapper_3 border-end">
            <!--apps and games-->
            <section id="giz-shop-products-main">

                <div class="giz-shop-products-header">
                    <div class="giz-shop-products-header--heading">
                        @(_selectedProductGroup?.Name ?? "All")
                    </div>
                    <div class="giz-shop-products-header--sort">
                        <svg width="20" height="8" viewBox="0 0 20 8" fill="white" xmlns="http://www.w3.org/2000/svg" class="mr-4">
                            <path d="M0.666016 0.5H19.3327V2.83333H0.666016V0.5ZM0.666016 5.16667H12.3327V7.5H0.666016V5.16667Z" />
                        </svg>
                        <span>Short by</span> Name
                        <svg width="8" height="5" viewBox="0 0 8 5" fill="none" xmlns="http://www.w3.org/2000/svg" class="ml-2">
                            <path d="M1 1L4 4L7 1" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                        </svg>
                    </div>
                </div>

                <div class="giz-shop-products-body giz-scrollbar-v">
                    <div class="giz-shop-products-wrapper">
                        @foreach (var product in Products.Where(a => !_selectedProductGroupId.HasValue || a.ProductGroupId == _selectedProductGroupId))
                        {
                            <GizProductCard Product="@product" IsHoverable="true" OnAddProduct="@AddProduct" OnOpenDetails="@OpenDetails" />
                        }
                    </div>
                </div>
            </section>
        </div>
        <!--/wrapper 3-->
        <!--wrapper 4-->
        <div class="wrapper_4">
            <!--order section-->
            <section class="giz-order pa-5">
                <!--order menu-->
                <div class="giz-order-menu">
                    <!--order header-->
                    <div class="giz-order-menu--header">
                        <div class="giz-header-title">detail</div>
                        <div class="giz-header-heading">My order</div>
                    </div>
                    <!--/order header-->
                    <!--order body-->
                    <div class="giz-order-menu--body giz-scrollbar-v">
                        @if (Order != null && Order.OrderLines.Count > 0)
                        {
                            <!--order detail-->
                            <div class="giz-order-wrapper">
                                @foreach (var orderLine in Order.OrderLines)
                                {
                                    <GizOrderItem OrderLine="@orderLine" OnRemoveProduct="@RemoveProduct" />
                                }
                            </div>
                            <!--order detail-->
                        }
                        else
                        {
                            <!--no order text-->
                            <div class="giz-no-order-wrapper">
                                <div class="giz-no-order-wrapper--title">No products</div>
                                <div class="giz-no-order-wrapper--text">Add products to get started</div>
                            </div>
                            <!--/no order text-->
                        }
                    </div>
                    <!--/order body-->
                    <!--order footer section-->
                    <div class="giz-order-menu--footer">
                        <div class="giz-order-message">
                            <form>
                                <TextInput TValue="string" IsMultiLine="true" IsFullWidth="true" Placeholder="Add your note.." Class="giz-order-notes" />
                            </form>
                        </div>
                        <!--order summary-->
                        <div class="giz-order-summary">
                            <div class="giz-order-summary--text">Total</div>
                            <div class="giz-order-summary--number">@Order.Total.ToString("C")</div>
                            <div class="giz-order-summary--text">points</div>
                            <div class="giz-order-summary--number">@Order.PointsTotal</div>
                            <div class="giz-order-summary--text">awards</div>
                            <div class="giz-order-summary--number">@Order.PointsAwardTotal</div>
                        </div>
                        <!--/order summary-->
                        <!--order btn-->
                        <div class="giz-place-order-btn">
                            <Button Size="ButtonSizes.Large" IsFullWidth="true" HasShadow="true" IsDisabled="@(Order == null || Order.OrderLines.Count == 0)" Command="@PlaceOrderCommand">place order</Button>
                        </div>
                        <!--order btn-->
                    </div>
                    <!--order footer section-->
                </div>
                <!--/order-->
            </section>
            <!--/order section-->
        </div>
        <!--wrapper 4-->
    </div>
    <!--/giz main-->
</div>
<!--/wrapper 2-->

<SelectPaymentMethodDialog @bind-IsOpen="SelectPaymentMethodIsOpen" />
<ProductDetailsDialog @bind-IsOpen="ProductDetailsIsOpen" />
