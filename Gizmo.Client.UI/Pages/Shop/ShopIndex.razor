@namespace Gizmo.Client.UI.Pages
@inherits CustomDOMComponentBase
@using Gizmo.Client.UI.ViewModels

<div class="giz-shop-wrapper">
    <div class="giz-shop">
        <div class="giz-shop__products">
            <div class="giz-shop__products__header">
                <div class="giz-shop__products__header__tab">
                    <ClientTab>
                        <ClientTabItem Class="@(!ShopService.ViewState.SelectedUserProductGroupId.HasValue ? "active" : "")">
                            <div @onclick=@(() => ShopService.SetSelectedProductsGroupIdAsync(null))>
                                @LocalizationService.GetString("GIZ_GEN_ALL")
                            </div>
                        </ClientTabItem>
                        @if (ShopService.ViewState.UserProductGroups != null)
                        {
                            @foreach (var productGroup in ShopService.ViewState.UserProductGroups)
                            {
                                <ClientTabItem Class="@(productGroup.ProductGroupId == ShopService.ViewState.SelectedUserProductGroupId ? "active" : "")">
                                    <div @onclick=@(() => ShopService.SetSelectedProductsGroupIdAsync(productGroup.ProductGroupId))>
                                        @productGroup.Name
                                    </div>
                                </ClientTabItem>
                            }
                        }
                    </ClientTab>
                </div>
            </div>
            <div class="giz-shop__products__body giz-scrollbar--v">
                <div class="giz-shop__products__body__ads">
                    <ExpansionPanel>
                        <Header>
                            @LocalizationService.GetString("GIZ_GEN_ADS")
                        </Header>
                        <ChildContent>
                            <AdsCarousel Interval="5000" />
                        </ChildContent>
                    </ExpansionPanel>
                </div>
                @foreach (var productGroup in ShopService.ViewState.UserGroupedProducts)
                {
                    <div class="giz-section">
                        <div class="giz-section__header">
                            @productGroup.Key
                        </div>
                        <div class="giz-section__body">
                            <div class="giz-shop__products__list">
                                @foreach (var product in productGroup)
                                {
                                    <ProductCard Product="@product" />
                                }
                            </div>
                        </div>
                    </div>
                }
            </div>

        </div>
        <div class="giz-shop__order">
            <GizOrder />
        </div>
    </div>
</div>
