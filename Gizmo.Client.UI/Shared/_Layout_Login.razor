@inherits LayoutComponentBase
@using Gizmo.Client.UI.ViewModels
@using Microsoft.Extensions.Options
@using Gizmo.Client.UI.Components
@using Gizmo.Web.Components

@inject IOptions<ClientUIOptions> ClientUIOptions

@if (!string.IsNullOrEmpty(ClientUIOptions.Value.Skin))
{
    <HeadContent>
        <link href="css/@ClientUIOptions.Value.Skin" rel="stylesheet" />
    </HeadContent>
}

<main client-theme="true">
    <div class="giz-main-container">
        <div class="giz-login__adv">
            <div class="giz-login__adv__background">
                <img src="_content/Gizmo.Client.UI/img/bg-img-2.png" alt="loading">
            </div>

            <div class="giz-login__adv__header">
                <div class="giz-nav-logo">
                    @*<div>
                        <img alt="loading">
                    </div>*@
                </div>
                <div class="giz-nav-title">@HostService.ViewState.HostNumber</div>
            </div>

            <div class="giz-login__adv__body">
                <Carousel Title="Daily News" ShowIndicator="true" Interval="5000">
                    @if (NewsFeeds != null)
                    {
                        @foreach (var item in NewsFeeds)
                        {
                            <CarouselItem>
                                @if (item.Type == NewsFeedTypes.Media)
                                {
                                    var mediaFeed = (MediaFeedViewModel)item;
                                    <div class="giz-login-adv">
                                        <div class="giz-login-adv__image">
                                            <img src="@mediaFeed.Thumb" alt="Image" />
                                        </div>
                                        <div class="giz-login-adv__text">@mediaFeed.Title</div>
                                    </div>
                                }
                            </CarouselItem>
                        }
                    }
                </Carousel>
            </div>

            <div class="giz-login__adv__footer">
                <ClientLanguageMenu />

                <div class="giz-server">
                    <Gizmo.Web.Components.Icon SVGIcon="Web.Components.Icons.DNS" Class="@(!HostService.ViewState.IsConnected ? "giz-server__icon disconnected" : "giz-server__icon")" />
                    <div class="giz-version">
                        <div class="giz-version__title">Version</div>
                        <div class="giz-version__version">2.457.002A</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="giz-login__login">
            @Body
        </div>
    </div>
    <DialogHost />
    @if (HostService.ViewState.IsLocked)
    {
        <div class="giz-login-overlay" @onclick="@(() => HostService.SetHostLockStateAsync(false))">
            <div class="giz-host-locked">
                <div class="giz-host-locked__message">
                    <Icon Size="IconSizes.Large" SVGIcon="Icons.Lock_Client" />
                    <div>Locked</div>
                </div>
            </div>
        </div>
    }
</main>
