@namespace Gizmo.Client.UI.Shared
@inherits CustomDOMComponentBase
@using Gizmo.Web.Components
@using Gizmo.UI.Services

@inject ILocalizationService localizationService

<tr class="giz-active-app-card">
    <td class="giz-active-app-card__image">
        <img src="@Executable.Image" alt="loading" />
    </td>
    <td class="giz-active-app-card__info">
        <div class="giz-active-app-card__info__category">Gaming</div>
        <div class="giz-active-app-card__info__title">@Executable.Caption</div>
    </td>
    <td class="giz-active-app-card__actions">
        <ComboButton Progress="@Executable.StatePercentage" Color="@(Executable.State == 3 ? ButtonColors.Danger : ButtonColors.Accent)" Variant="@(Executable.State == 2 ? ButtonVariants.Progress : ButtonVariants.Fill)" Size="ButtonSizes.Large" IsFullWidth="true" OnClickMainButton="@OnClickMainButtonHandler" OpenDirection="PopupOpenDirections.Cursor">
            <ChildContent>
                @switch (Executable.State)
                {
                    case 0:
                        <div>@localizationService.GetString("GIZ_APPS_LAUNCH")</div>
                        break;
                            
                    case 1:
                        <GizSpinner />
                        break;

                    case 2:
                        <div>@localizationService.GetString("GIZ_APPS_LOADING")</div>
                        break;

                    case 3:
                        <div>@localizationService.GetString("GIZ_APPS_TERMINATE")</div>
                        break;
                }
            </ChildContent>
            <DropDownItems>
                <ListItem>
                    @localizationService.GetString("GIZ_APPS_AUTO_START")
                </ListItem>
                <ListItem SVGIcon="Icons.Repair_Client">
                    @localizationService.GetString("GIZ_APPS_REPAIR")Repair
                </ListItem>
                <ListItem SVGIcon="Icons.Folder_Client">
                    <ChildContent>
                        @localizationService.GetString("GIZ_APPS_PERSONAL_FILES")
                    </ChildContent>
                    <NestedList>
                        <ListItem>
                            -123
                        </ListItem>
                        <ListItem>
                            456
                        </ListItem>
                        <ListItem>
                            123
                        </ListItem>
                        <ListItem>
                            456
                        </ListItem>
                        <ListItem>
                            123
                        </ListItem>
                        <ListItem>
                            456
                        </ListItem>
                    </NestedList>
                </ListItem>
                <ListItem SVGIcon="Icons.Close_Client">
                    @localizationService.GetString("GIZ_APPS_TERMINATE")
                </ListItem>
            </DropDownItems>
        </ComboButton>
    </td>
</tr>